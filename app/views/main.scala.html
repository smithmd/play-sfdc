@(title: String, data: String)(content: Html)

<!DOCTYPE html>

<html>
    <head>
        <title>@title</title>
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
        <script type="application/javascript" src="https://www.google.com/jsapi"></script>
        <script type="application/javascript">
            var dashboard = @Html(data);

            // Load the Visualization API and the piechart package
            google.load('visualization', '1.0', {'packages':['table', 'corechart']});

            // Set a callback to run when the Google Visualization API is loaded.
            google.setOnLoadCallback(drawChart);

            function drawChart() {
                var data = new google.visualization.DataTable();
//                var columnInfo = dashboard.componentData[0].reportResult.reportExtendedMetadata.aggregateColumnInfo[report.reportMetadata.aggregates[column]];

                data.addColumn('string', 'Type');
                data.addColumn('number', 'Count');

                var columnLabels = new Array();
                for (var agg in dashboard.componentData[0].reportResult.reportExtendedMetadata.aggregateColumnInfo) {
                    columnLabels.push(agg.label);
                }

                var groupings = new Array();
                for (var group in dashboard.componentData[0].reportResult.groupingsDown.groupings) {
                    groupings.push(group.label);
                }

                var factMap = dashboard.componentData[0].reportResult.factMap;
                for (var element in factMap) {
                    if (factMap.hasOwnProperty(element) && !element.contains('_')) {
                        for (var i = 0; i < factMap[element].aggregates.length; i++) {
                            console.log(element + " : " + factMap[element].aggregates[0].value);
                            data.addRows([[groupings[i], columnLabels[i], factMap[element].aggregates[i].value]]);
                        }
                    }
                }

                var options = {'title':dashboard.dashboardMetadata.attributes.dashboardName,
                    showRowNumber: false
                };

                var chart = new google.visualization.Table(document.getElementById('chart'));
                chart.draw(data, options);

                console.log(dashboard);
                document.getElementById('datadisplay' ).innerHTML = JSON.stringify(dashboard.componentData, null, '  ');

                document.getElementById('testArea' ).innerHTML = dashboard.componentData[0].reportResult.factMap['1_5!T'].aggregates[0].value;
            }

        </script>
    </head>
    <body>
        <div id="chart"></div>
        <div id="testArea"></div>
        <pre id="datadisplay"></pre>
    </body>
</html>
